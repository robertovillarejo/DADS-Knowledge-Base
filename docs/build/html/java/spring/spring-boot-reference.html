

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Spring Boot: Guía de referencia &mdash; documentación de Base de conocimientos - 0.1</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Índice"
              href="../../genindex.html"/>
        <link rel="search" title="Búsqueda" href="../../search.html"/>
    <link rel="top" title="documentación de Base de conocimientos - 0.1" href="../../index.html"/>
        <link rel="up" title="Spring: documentación en español" href="index.html"/>
        <link rel="next" title="JHipster" href="../jhipster/index.html"/>
        <link rel="prev" title="Spring Data JPA - Documentación de referencia" href="spring-data-jpa-reference.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Base de conocimientos
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../description.html">Descripción</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">Licencia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about-developer.html">Sobre el Desarrollador</a></li>
</ul>
<p class="caption"><span class="caption-text">Java</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Java</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Spring: documentación en español</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spring-data-jpa-reference.html">Spring Data JPA - Documentación de referencia</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Spring Boot: Guía de referencia</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#caracteristicas-de-spring-boot">Características de Spring Boot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trabajando-con-tecnologias-nosql">30. Trabajando con tecnologías NoSQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#almacenamiento-en-cache">31. Almacenamiento en caché</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../jhipster/index.html">JHipster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maven/index.html">Maven</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Arquitectura</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arquitectura/index.html">Arquitectura</a></li>
</ul>
<p class="caption"><span class="caption-text">Linux</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../linux/index.html">Linux</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Base de conocimientos</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Java</a> &raquo;</li>
        
          <li><a href="index.html">Spring: documentación en español</a> &raquo;</li>
        
      <li>Spring Boot: Guía de referencia</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/java/spring/spring-boot-reference.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="spring-boot-guia-de-referencia">
<span id="spring-boot-guia-de-referencia"></span><h1>Spring Boot: Guía de referencia<a class="headerlink" href="#spring-boot-guia-de-referencia" title="Enlazar permanentemente con este título">¶</a></h1>
<p><a class="reference external" href="https://docs.spring.io/spring-boot/docs/current/reference/pdf/spring-boot-reference.pdf">Documento original</a></p>
<div class="section" id="caracteristicas-de-spring-boot">
<span id="caracteristicas-de-spring-boot"></span><h2>Características de Spring Boot<a class="headerlink" href="#caracteristicas-de-spring-boot" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="trabajando-con-bases-de-datos-sql">
<span id="trabajando-con-bases-de-datos-sql"></span><h3><strong>29. Trabajando con bases de datos SQL</strong><a class="headerlink" href="#trabajando-con-bases-de-datos-sql" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El Framework Spring provee un extenso soporte para trabajar con bases de datos SQL. Desde acceso JDBC directo usando <em>JdbcTemplate _hasta tecnologías completas de 'mapeo objeto-relacional' tales como Hibernate. Spring Data provee un nivel adicional de funcionalidad, creando implementaciones de _Repository</em> directamente de las interfaces y usando convenciones para generar consultas (<em>queries</em>) a partir del nombre de tus métodos.</p>
</div>
<div class="section" id="configurar-una-fuente-de-datos">
<span id="configurar-una-fuente-de-datos"></span><h3><strong>29.1 Configurar una Fuente de Datos</strong><a class="headerlink" href="#configurar-una-fuente-de-datos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La interfaz de Java _javax.sql.Datasource _provee un método estándar para trabajar con conexiones de bases de datos. Tradicionalmente un _DataSource _(Fuente de Datos) utiliza una URL junto con algunas credenciales para establecer una conexión a la base de datos.</p>
<blockquote>
<div><p>Tip</p>
<p>Revisa también la sección 'How to' para ejemplos más avanzados, normalmente para tomar el control completo sobre la configuración del _Data Source _(Fuente de Datos).</p>
</div></blockquote>
</div>
<div class="section" id="soporte-de-bases-de-datos-embebidas">
<span id="soporte-de-bases-de-datos-embebidas"></span><h3>Soporte de Bases de Datos <em>Embebidas</em><a class="headerlink" href="#soporte-de-bases-de-datos-embebidas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Con frecuencia es conveniente desarrollar aplicaciones utilizando una base de datos _embebida _en-memoria. Obviamente, las bases de datos en-memoria no proveen almacenamiento persistente; necesitarás poblar tu base de datos cuando tu aplicación inicie y estar preparado para desechar tus datos cuando tu aplicación finalice.</p>
<blockquote>
<div><p>Tip</p>
<p>La sección 'How to' incluye una sección sobre cómo inicializar una base de datos</p>
</div></blockquote>
<p>Spring Boot puede auto-configurar las bases de datos H2, HSQL y Derby. No tienes que proveer ninguna URL de conexión, simplemente incluye una dependencia de construcción (<em>build dependency</em>) a la base de datos embebida que quieres utilizar.</p>
<blockquote>
<div><p>Tip</p>
<p>Si estás usando esta característica en tus pruebas, podrás notar que la misma base de datos es reusada por tu suite de pruebas completa independientemente del número de contextos de aplicación que uses. Si quieres asegurarte de que cada contexto tenga una base de datos separada, deberías establecer _spring.datasource.generate-unique-name _a <strong>true</strong>.</p>
</div></blockquote>
<p>Por ejemplo, las dependencias típicas de un POM serían:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hsqldb<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hsqldb<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<blockquote>
<div><p>Nota</p>
<p>Necesitas una dependencia en <em>spring-jdbc _para que una base de datos embebida sea auto-configurada. En este ejemplo ésta es extraída transitivamente via _spring-boot-starter-data-jpa</em>.</p>
<p>Tip</p>
<p>Si, por alguna razón, configuras la URL de conexión para una base de datos embebida, se debe tener cuidado de asegurarse que el apagado automático está deshabilitado. Si estás usando H2 debes usar DB_CLOSE_ON_EXIT=FALSE para hacerlo. Si estás usando HSQLDB, debes asegurarte que <em>shutdown=true</em> no se está usando. Disabling the database’s automatic shutdown allowsSpring Boot to control when the database is closed, thereby ensuring that it happens once accessto the database is no longer needed.</p>
</div></blockquote>
<div class="section" id="conexion-a-una-base-de-datos-de-produccion">
<span id="conexion-a-una-base-de-datos-de-produccion"></span><h4>Conexión a una base de datos de producción<a class="headerlink" href="#conexion-a-una-base-de-datos-de-produccion" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las conexiones a bases de datos de producción también pueden ser auto-configuradas utilizando un conjunto de Fuentes de Datos (<em>pooling DataSource)</em>. Aquí se muestra el algoritmo para elegir una implementación específica:</p>
<ul class="simple">
<li>Preferimos el _pooling DataSource _de Tomcat por su rendimiento y concurrencia, así que si está disponible siempre lo elegimos.</li>
<li>De otro modo, si HikariCP está disponible lo usaremos.</li>
<li>Si ni el <em>pooling DataSource</em> de Tomcat ni HikariCP están disponibles pero Commons DBCP sí entonces lo usaremos, pero no lo recomendamos en producción y su soporte está obsoleto.</li>
<li>Finalmente, si Commons DBCP2 está disponible lo usaremos.</li>
</ul>
<p>Si usas los <em>starters</em> <strong>spring-boot-starter-jdbc</strong> o <strong>spring-boot-starter-data-jpa</strong> automáticamente obtendrás una dependencia de <strong>tomcat-jdbc</strong>.</p>
<blockquote>
<div><p>Nota</p>
<p>Puedes omitir este algoritmo completamente y especificar el <em>connection pool</em> a utilizar modificando la propiedad <em>spring.datasource.type</em>. Esto es especialmente importante si estás corriendo tu aplicación en un contenedor Tomcat como el <em>tomcat-jdbc</em> que se provee por defecto.</p>
<p>Tip</p>
<p>Adicionalmente los pool de conexiones siempre pueden ser configuradas manualmente. Si defines tu propio _bean DataSource _no se hará la autoconfiguración.</p>
</div></blockquote>
<p>La configuración del <em>DataSource</em> está controlada por las propiedades de configuración externas en <em>spring.datasource.*.</em> Por ejemplo, podrías declarar la siguiente sección en <em>application.properties</em>:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">spring.datasource.url</span><span class="o">=</span><span class="s">jdbc:mysql://localhost/test</span>
<span class="na">spring.datasource.username</span><span class="o">=</span><span class="s">dbuser</span>
<span class="na">spring.datasource.password</span><span class="o">=</span><span class="s">dbpass</span>
<span class="na">spring.datasource.driver-class-name</span><span class="o">=</span><span class="s">com.mysql.jdbc.Driver</span>
</pre></div>
</div>
<blockquote>
<div><p>Nota</p>
<p>Deberás al menos especificar la url usando la propiedad _spring.datasource.url _o Spring Boot tratará de auto-configurar una base de datos embebida.</p>
<p>Tip</p>
<p>A menudo no tendrás que especificar el <em>driver-class-name</em> puesto que Spring Boot puede deducirlo para la mayoría de las bases de datos a partir de la url.</p>
<p>Para que un _pooling DataSource _sea creado necesitamos ser capaces de verificar que una clase de _Driver _está disponible, así que revisamos eso antes que nada. Por ejemplo, si estableces _spring.datasource.driver-class-name=com.mysql.jdbc.Driver _entonces esa clase debe poderse cargar.</p>
</div></blockquote>
<p>Véase DataSourceProperties para conocer más de las opciones soportadas. Estas son las opciones estándar que funcionan independientemente de la implementación real. También es posible afinar las configuraciones de la implementación específica usado sus respectivos prefijos (<em>spring.datasource.tomcat.*</em>, <em>spring.datasource.hikari.*</em>, y <em>spring.datasource.dbcp2.*</em>) Refiérase a la documentación de la implementación del _pool _de conexiones que estás usando para más detalles.</p>
<p>Por ejemplo, si estás usando el <em>Tomcat connection pool</em> podrías personalizar varias configuraciones adicionales:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="c"># Number of ms to wait before throwing an exception if no connection is available.</span>
<span class="na">spring.datasource.tomcat.max-wait</span><span class="o">=</span><span class="s">10000</span>
<span class="c"># Maximum number of active connections that can be allocated from this pool at the same time.</span>
<span class="na">spring.datasource.tomcat.max-active</span><span class="o">=</span><span class="s">50</span>
<span class="c"># Validate the connection before borrowing it from the pool.</span>
<span class="na">spring.datasource.tomcat.test-on-borrow</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
</div>
<div class="section" id="conexion-a-una-fuente-de-datos-datasource-jndi">
<span id="conexion-a-una-fuente-de-datos-datasource-jndi"></span><h4>Conexión a una Fuente de Datos (DataSource) JNDI<a class="headerlink" href="#conexion-a-una-fuente-de-datos-datasource-jndi" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Si estás desplegando tu aplicación Spring Boot en un Servidor de Aplicaciones podrías querer configurar y administrar tu <em>DataSource</em> usando las características incorporadas de tus Servidores de Aplicaciones y acceder usando JNDI.</p>
<p>La propiedad <em>spring.datasource.jndi-name _puede ser usada como una alternativa a  las propiedades _spring.datasource.url</em>, <em>spring.datasource.username</em> y <em>spring.datasource.password</em> para acceder al <em>DataSource</em> desde una locaciónn específica JNDI. Por ejemplo, la siguiente sección en <em>application.properties</em> muestra cómo puedes acceder al _DataSource _ de un Servidor de Aplicaciones <em>JBoss:</em></p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">spring.datasource.jndi-name</span><span class="o">=</span><span class="s">java:jboss/datasources/customers</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="usando-jdbctemplate">
<span id="usando-jdbctemplate"></span><h3>29.2 Usando JdbcTemplate<a class="headerlink" href="#usando-jdbctemplate" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las clases <em>JdbcTemplate _y _NamedParameterJdbcTemplate</em> son auto-configuradas y puedes <em>cablearlos</em> directamente en tus propios <em>beans</em> utilizando <em>&#64;Autowire</em>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">MyBean</span><span class="o">(</span><span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">jdbcTemplate</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="jpa-y-spring-data">
<span id="jpa-y-spring-data"></span><h3>29.3 JPA y 'Spring Data'<a class="headerlink" href="#jpa-y-spring-data" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La API de Persistencia de Java (JPA) es una tecnología estándar que te permite 'mapear' objectos a bases de datos relacionales. El POM de <em>spring-boot-starter-data-jpa</em> provee una manera rápida de iniciar. Éste provee las siguientes dependencias clave:</p>
<ul class="simple">
<li>Hibernate --- Una de las implementaciones de JPA más populares.</li>
<li>Spring Data JPA --- Hace más fácil implementar los repositorios basados en JPA.</li>
<li>Spring ORMs --- El soporte del núcleo ORM del _Framework _Spring</li>
</ul>
<blockquote>
<div><p>Tip</p>
<p>No entraremos en muchos detaller de JPA o Spring Data aquí. Puedes seguir la guía 'Accediendo a Datos con JPA' en spring.io y leer la documentación de referencia Spring Data JPA y Hibernate.</p>
<p>Note</p>
<p>Por defecto, Spring Boot utiliza Hibernate 5.0.x. Sin embargo, también es posible usar 4.3.x o 5.2.x si lo deseas. Por favor consulta los ejemplos Hibernate4 y Hibernate5 para ver cómo hacerlo.</p>
</div></blockquote>
<div class="section" id="clases-de-entidades">
<span id="clases-de-entidades"></span><h4>Clases de Entidades<a class="headerlink" href="#clases-de-entidades" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Tradicionalmente, las clases de 'Entidad' JPA se especifican en un archivo <em>persistence.xml</em>. Con Spring Boot este archivo no es necesario y en su lugar se utilizar el 'Escaneo de Entidades' (_Entity Scanning). _Por defecto se buscan todos los paquetes que se encuentran debajo de tu clase de configuración principal (la que tiene la anotación <em>&#64;EnableAutoConfiguration</em> o _&#64;SpringBootApplication_).</p>
<p>Se considerará cualquier clase anotada con <em>&#64;Entity</em>, _&#64;Embeddable _o _&#64;MappedSuperclass. _Una clase de entidad típica se vería algo así:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.myapp.domain</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">City</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">state</span><span class="o">;</span>

    <span class="c1">// ... additional members, often include @OneToMany mappings</span>

    <span class="kd">protected</span> <span class="nf">City</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// no-args constructor required by JPA spec</span>
    <span class="c1">// this one is protected since it shouldn&#39;t be used directly</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">City</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
       <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getState</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ... etc</span>
<span class="o">}</span>
</pre></div>
</div>
<blockquote>
<div><p>Tip</p>
<p>Puedes personalizar las ubicaciones donde se realiza el escaneo de entidades utilizando la anotación <em>&#64;EntityScan</em>. Mira la sección 77.4, cómo &quot;Separar las definiciones <em>&#64;Entity</em> de la configuración de Spring&quot;.</p>
</div></blockquote>
</div>
<div class="section" id="repositorios-jpa-de-spring-data">
<span id="repositorios-jpa-de-spring-data"></span><h4>Repositorios JPA de Spring Data<a class="headerlink" href="#repositorios-jpa-de-spring-data" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los repositorios JPA de Spring Data son interfaces que te permiten definir el acceso a los datos. Las consultas JPA son creadas automáticamente a partir del nombre de tus métodos. Por ejemplo, una interfaz <em>CityRepository</em> podría declarar un método _findAllByState(String state) _encontrar todas las ciudades en un estado proporcionado.</p>
<p>Para consultas más complejas puedes anotar tu método utilizando la anotación <em>Query</em> de Spring Data.</p>
<p>Los repositorios de Spring Data usualmente extienden de las interfaces <em>Repository</em> o <em>CrudRepository</em>. Si estás utilizando la auto-configuración, los repositorios se buscarán a partir  del paquete que contiene tu clase principal de configuración (la que está anotada con <em>&#64;EnableAutoConfiguration</em> o con <em>&#64;SpringBootApplication</em>).</p>
<p>Éste es un repositorio típico de Spring Data:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.myapp.domain</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CityRepository</span> <span class="kd">extends</span> <span class="n">Repository</span><span class="o">&lt;</span><span class="n">City</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">City</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
    <span class="n">City</span> <span class="nf">findByNameAndCountryAllIgnoringCase</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">country</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<blockquote>
<div><p>Tip</p>
<p>Apenas y se ha tocado el tema de Spring Data JPA. Para detalles completos revisa su documentación de referencia.</p>
</div></blockquote>
</div>
<div class="section" id="creando-y-tirando-bases-de-datos-jpa">
<span id="creando-y-tirando-bases-de-datos-jpa"></span><h4>Creando y tirando bases de datos JPA<a class="headerlink" href="#creando-y-tirando-bases-de-datos-jpa" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Por defecto, las bases de datos JPA se crearán automáticamente <strong>solo</strong> si utilizar una base de datos embebida (H2, HSQL o Derby). Puedes configurar explícitamente los ajustes de JPA usando las propiedades <em>spring.jpa.*</em>. Por ejemplo, para crear y tirar tablas puedes añadir lo siguiente en tu archivo <em>application.properties</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spring</span><span class="o">.</span><span class="n">jpa</span><span class="o">.</span><span class="n">hibernate</span><span class="o">.</span><span class="n">ddl</span><span class="o">-</span><span class="n">auto</span><span class="o">=</span><span class="n">create</span><span class="o">-</span><span class="n">drop</span>
</pre></div>
</div>
<blockquote>
<div><p>Nota</p>
<p>La propiedad interna propia de Hibernate para hacer esto es <em>hibernate.hbm2ddl.auto</em>. Puedes establecerla, junto con otras propiedades nativas de Hibernate, utilizando _spring.jpa.properties.* _(el prefijo se elimina antes de añadirlas al <em>entity manager</em>). Ejemplo:</p>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spring</span><span class="o">.</span><span class="n">jpa</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">hibernate</span><span class="o">.</span><span class="n">globally_quoted_identifiers</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>pasa a _hibernate.globally_quoted_identifiers _al entity manager de Hibernate.</p>
<p>Por defecto la ejecución  (o validación) DDL se aplaza hasta que se inicia el <em>ApplicationContext</em>. También hay una bandera <em>spring.jpa.generate-ddl</em>, pero no es usada si la auto-configuración de Hibernate se encuentra activa porque las configuraciones <em>ddl-auto</em> son más granulares.</p>
</div>
<div class="section" id="open-entitymanager-in-view">
<span id="open-entitymanager-in-view"></span><h4>Open EntityManager in View<a class="headerlink" href="#open-entitymanager-in-view" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Si estás ejecutando una aplicación web, Spring Boot registrará por defecto al OpenEntityManagerInViewInterceptor_ _para aplicar el patrón &quot;Open EntityManager in View&quot;, por ejemplo para permitir la carga lenta (_lazy loading_\) en las vistas web. Si no deseas tener este comportamiento entonces debes establecer <em>spring.jpa.open-in-view</em> en <em>false</em> en tu <em>application.properties</em>.</p>
</div>
</div>
</div>
<div class="section" id="trabajando-con-tecnologias-nosql">
<span id="trabajando-con-tecnologias-nosql"></span><h2>30. Trabajando con tecnologías NoSQL<a class="headerlink" href="#trabajando-con-tecnologias-nosql" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Spring Data provee proyectos adicionales que te ayudan a acceder a una variedad de tecnologías NoSQL incluyendo MongoDB, Neo4J, Elasticsearch, Solr, Redis, Gemfire, Cassandra, Couchbase y LDAP. Spring Boot provee auto-configuración para Redis, MongoDB, Neo4j, Elasticsearch, Solr Cassandra, Couchbase y LDAP; puedes hacer uso de otros proyectos, pero necesitarás configurarlos tú mismo. Consulta la documentación de referencia apropiada en projects.spring.io/spring-data.</p>
<div class="section" id="redis">
<span id="redis"></span><h3>30.1 Redis<a class="headerlink" href="#redis" title="Enlazar permanentemente con este título">¶</a></h3>
</div>
<div class="section" id="mongodb">
<span id="mongodb"></span><h3>30.2 MongoDB<a class="headerlink" href="#mongodb" title="Enlazar permanentemente con este título">¶</a></h3>
<p>MongoDB es una base de datos de documentos NoSQL de código abierto que utiliza un esquema parecido a JSON en lugar de los tradicionales datos relacionales basados en tablas. Spring Boot ofrece varias conveniencias para trabajar con MongoDB, incluyendo el 'Starter' <em>spring-boot-starter-data-mongo-db</em>.</p>
<div class="section" id="conectando-a-una-base-de-datos-mongodb">
<span id="conectando-a-una-base-de-datos-mongodb"></span><h4>Conectando a una base de datos MongoDB<a class="headerlink" href="#conectando-a-una-base-de-datos-mongodb" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Puedes inyectar una auto-configurada <em>org.springframework.data.mongodb.MongoFactory _para acceder a bases de datos Mongo. Por defecto la instancia tratará de conectarse a un servidor MongoDB utilizando la URL _mongodb://localhost/test</em>:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.springframework.data.mongodb.MongoDbFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.mongodb.DB</span><span class="o">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MongoDbFactory</span> <span class="n">mongo</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">MyBean</span><span class="o">(</span><span class="n">MongoDbFactory</span> <span class="n">mongo</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mongo</span> <span class="o">=</span> <span class="n">mongo</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">example</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">mongo</span><span class="o">.</span><span class="na">getDb</span><span class="o">();</span>
        <span class="c1">// ...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Puedes establecer la propiedad <em>spring.data.mongodb.uri</em> para cambiar la URL y configurar ajustes adicionales tales como el conjunto de réplica (<em>replica set</em>):</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">spring.data.mongodb.uri</span><span class="o">=</span><span class="s">mongodb://user:secret@mongo1.example.com:12345.example.com:23456/test</span>
</pre></div>
</div>
<p>Alternativamente, siempre que estés usando Mongo 2.x, especifica un <em>host/port</em>. Por ejemplo, podrías declarar lo siguiente en tu <em>application.properties</em>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spring</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">mongodb</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">mongoserver</span>
<span class="n">spring</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">mongodb</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">27017</span>
</pre></div>
</div>
<blockquote>
<div><p>Nota</p>
<p><em>spring.data.mongodb.host _y _spring.data.mongodb.port</em> no son soportados si estás usando el driver de Mongo 3.0 de Java. En tales casos, <em>spring.data.mongodb.uri</em> deberían usarse para proveer toda la configuración.</p>
<p>Tip</p>
<p>Si_ _no se especifica _spring.data.mongodb.port_ se usa por defecto el 27017. Podrías simplemente borrar esta línea del ejemplo de arriba.</p>
<p>Tip</p>
<p>Si no estás usando Spring Data Mongo puedes inyectar los <em>beans</em> de <em>com.mongodb.Mongo _en lugar de usar _MongoDbFactory.</em></p>
</div></blockquote>
<p>También puedes declarar tu propia <em>MongoDbFactory</em> o tu propio bean <em>Mongo</em> si quieres tomar control completo al establecer la conexión a MongoDB.</p>
</div>
<div class="section" id="mongotemplate">
<span id="mongotemplate"></span><h4>MongoTemplate<a class="headerlink" href="#mongotemplate" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Spring Data Mongo provee una clase MongoTemplate que es muy similar en su diseño a la <em>JdbcTemplate</em> de Spring. Al igual que con <em>JdbcTemplate</em> Spring Boot auto-configura por ti un bean para simplemente inyectarlo:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.mongodb.core.MongoTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MongoTemplate</span> <span class="n">mongoTemplate</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">MyBean</span><span class="o">(</span><span class="n">MongoTemplate</span> <span class="n">mongoTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mongoTemplate</span> <span class="o">=</span> <span class="n">mongoTemplate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Para detalles completos consulta el Javadoc de <em>MongoOperations.</em></p>
</div>
<div class="section" id="repositorios-mongodb-de-spring-data">
<span id="repositorios-mongodb-de-spring-data"></span><h4>Repositorios MongoDB de Spring Data<a class="headerlink" href="#repositorios-mongodb-de-spring-data" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Spring Data incluye soporte de repositorios para MongoDB. Al igual que los repositorios JPA discutidos anteriormente, el principio básico es que estas consultas se construyen automáticamente basado en el nombre de los métodos.</p>
<p>De hecho, ambos Spring Data JPA y Spring Data MongoDB tienen en común la misma infraestructura; así podrías tomar el ejemplo de JPA visto anteriormente y, asumiendo que <em>City</em> es ahora una clase de datos Mongo en lugar de una entidad JPA (<em>JPA &#64;Entity</em>), funcionará de la misma manera.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.example.myapp.domain</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CityRepository</span> <span class="kd">extends</span> <span class="n">Repository</span><span class="o">&lt;</span><span class="n">City</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">City</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
    <span class="n">City</span> <span class="nf">findByNameAndCountryAllIgnoringCase</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">country</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<blockquote>
<div><p>Tip</p>
<p>Para detalles completo de Spring Data MongoDB, incluyendo sus tecnologías de mapeo de objetos, consulte su documentación de referencia.</p>
</div></blockquote>
</div>
<div class="section" id="embedded-mongo">
<span id="embedded-mongo"></span><h4>Embedded Mongo<a class="headerlink" href="#embedded-mongo" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Spring Boot ofrece auto-configuración para Embedded Mongo (Mongo embebido). Para usarlo en tu aplicación Spring Boot añade una dependencia en <em>de.flapdoodle.embed:de.flapdoodle.embed.mongo</em>.</p>
<p>El puerto en que Mongo escuchará puede configurarse usando la propiedad <em>spring.data.mongodb.port</em>. Para usar un puerto libre aleatorio usa el valor de cero. El <em>MongoClient</em> creado por <em>MongoAutoConfiguration</em> se configurará automáticamente para usar el puerto asignado aleatoriamente.</p>
<blockquote>
<div><p>Nota</p>
<p>Si no configuras un puerto personalizado, el soporte embebido usará un puerto aleatorio por defecto (en lugar del 27017)</p>
</div></blockquote>
<p>Si tienes SLF4J en el classpath, la salida producida por Mongo será automáticamente dirigida a un <em>logger</em> llamado <em>org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongo</em>.</p>
<p>Puedes declarar tus propios beans <em>IMongodConfig</em> y <em>IRuntimeConfig</em> para tomar el control de la configuración de las instancias de Mongo y el ruteo del <em>logging</em>.</p>
</div>
</div>
<div class="section" id="neo4j">
<span id="neo4j"></span><h3>30.3 Neo4j<a class="headerlink" href="#neo4j" title="Enlazar permanentemente con este título">¶</a></h3>
</div>
<div class="section" id="elasticsearch">
<span id="elasticsearch"></span><h3>30.6 Elasticsearch<a class="headerlink" href="#elasticsearch" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Elasticsearch es un motor de búsqueda y análisis de código abierto, distribuido y en tiempo real. Spring Boot ofrece auto-configuracióno básica para Elasticsearch y abstracciones de éste provistas por Spring Data ElasticSearch. Hay un 'Starter' <em>spring-boot-starter-data-elasticsearch</em> para la recolección de dependencias de una manera conveniente. Spring Boot también soporta Jest.</p>
<div class="section" id="conectando-a-elasticsearch-usando-jest">
<span id="conectando-a-elasticsearch-usando-jest"></span><h4>Conectando a Elasticsearch usando Jest<a class="headerlink" href="#conectando-a-elasticsearch-usando-jest" title="Enlazar permanentemente con este título">¶</a></h4>
</div>
<div class="section" id="conectando-a-elasticsearch-usando-spring-data">
<span id="conectando-a-elasticsearch-usando-spring-data"></span><h4>Conectando a Elasticsearch usando Spring Data<a class="headerlink" href="#conectando-a-elasticsearch-usando-spring-data" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Puedes inyectar una instancia auto-configurada de <em>ElasticsearchTemplate</em> o Elasticsearch <em>Client</em> así como cualquier otro Spring Bean. Por defecto la instancia incrustará un servidor local en-memoria (un <em>Node</em> en términos de Elasticsearch) y usará el directorio actual como el directorio <em>home</em> para el servidor_. _En esta configuración, la primera cosa por hacer es decirle a Elasticsearch dónde almacenar sus archivos:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">spring.data.elasticsearch.properties.path.home</span><span class="o">=</span><span class="s">/foo/bar</span>
</pre></div>
</div>
<p>Alternativamente, puedes cambiar a un servidor remoto (i.e. un <em>TransportClient</em>) configurando <em>spring.data.elasticsearch.cluster-nodes</em> a una lista separada por comas de 'host:port'.</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">spring.data.elasticsearch.cluster-nodes</span><span class="o">=</span><span class="s">localhost:9300</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">ElasticsearchTemplate</span> <span class="n">template</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">MyBean</span><span class="o">(</span><span class="n">ElasticsearchTemplate</span> <span class="n">template</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// ...</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Si añades <em>&#64;Bean</em> de tu propio tipo, <em>ElasticsearchTemplate</em> reemplazará el bean por defecto.</p>
</div>
<div class="section" id="repositorios-spring-data-elasticsearch">
<span id="repositorios-spring-data-elasticsearch"></span><h4>Repositorios Spring Data Elasticsearch<a class="headerlink" href="#repositorios-spring-data-elasticsearch" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Spring Data incluye soporte para los repositorios de Elasticsearch. Al igual que con los repositorios discutidos anteriormente, el principio básico es que las consultas se construyen automáticamente basado en el nombre de los métodos.</p>
<p>De hecho, ambos Spring Data JPA y Spring Data Elasticsearch comparten la misma infraestructura; así que podrías tomar el ejemplo de JPA visto anteriormente y, asumiendo que _City _es ahora una clase _&#64;Document <em>en lugar de una entidad JPA (_JPA &#64;Entity</em>), funcionará de la misma manera.</p>
<blockquote>
<div><p>Tip</p>
<p>Para detalles completos de Spring Data Elasticsearch, consulta su documentación de referencia.</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="almacenamiento-en-cache">
<span id="almacenamiento-en-cache"></span><h2>31. Almacenamiento en caché<a class="headerlink" href="#almacenamiento-en-cache" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El Framework Spring provee soporte para añadir caché de manera transparente a una aplicación. En su núcleo, la abstracción aplica caché a los métodos, reduciendo así el número de ejecuciones basado en la información disponible en la caché. La lógica del almacenamiento en caché se aplica transparentemente, sin ninguna interferencia a quien invoca. Spring Boot auto-configura la infraestructura de caché siempre que el soporte se encuentre habilitado mediante la anotación <em>&#64;EnableCaching</em>.</p>
<blockquote>
<div><p>Nota</p>
<p>Para más detalles revisa la sección relevante de la referencia de Spring Framework.</p>
</div></blockquote>
<p>En pocas palabras, añadir caché a una operación de tu servicio es tan sencillo como añadir la anotación relevante en su método:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.springframework.cache.annotation.Cacheable</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">MathService</span> <span class="p">{</span>

    <span class="nd">@Cacheable</span><span class="p">(</span><span class="s2">&quot;piDecimals&quot;</span><span class="p">)</span>
    <span class="n">public</span> <span class="nb">int</span> <span class="n">computePiDecimal</span><span class="p">(</span><span class="nb">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="o">...</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Este ejemplo demuestra el uso del caché en una operación potencialmente costosa. Antes de invocar  el método <em>computePiDecimals</em>, la abstracción buscará una entrada en la caché de <em>piDecimals</em> que coincida con el argumento <em>i</em>. Si se encuentra una entrada, el contenido en la caché se retorna inmediatamente a quien llama y el método no se invoca. En caso contrario, el método se invoca y la caché se actualiza antes de retornar el valor.</p>
<blockquote>
<div><p>Nota</p>
<p>También puedes usar las anotaciones del estándar JSR-107 (Cache) de manera transparente. Sin embargo, recomendamos encarecidamente que no se mezclen ni emparejen.</p>
</div></blockquote>
<p>Si no añades ninguna librería específica de caché, Spring Boot auto-configurará un SimpleProvider que utiliza mapas concurrentes en memoria. Cuando se requiere una caché (i.e. <em>piDecimals</em> en el ejemplo de arriba), este proveedor la creará por ti al-vuelo (<em>on-the-fly</em>). Realmente no se recomienda utilizar el <em>simple provider _para un ambiente de producción, pero es magnífico para iniciar y asegurarse que se comprenden las características. Una vez que decidas sobre el proveedor que utilizarás, por favor asegúrate de leer su documentación para descifrar cómo configurar los cachés que usa tu aplicación. Prácticamente todos los proveedores requieren que configures explícitamente cada caché que usarás en la aplicación.  Algunos ofrecen una manera de personalizar los cachés por defecto definidos por la propiedad _spring.cache.cache-names</em>.</p>
<blockquote>
<div><p>Tip</p>
<p>También es posible actualizar o desalojar datos de la caché de manera transparente.</p>
<p>Nota</p>
<p>Si estás usando la infraestructura de caché con beans que no son basados en interfaz, asegúrate de habilitar el atributo <em>proxyTargetClass</em> de <em>&#64;EnableCaching</em>.</p>
</div></blockquote>
<div class="section" id="proveedores-de-cache-soportados">
<span id="proveedores-de-cache-soportados"></span><h3>31.1 Proveedores de caché soportados<a class="headerlink" href="#proveedores-de-cache-soportados" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La abstracción del caché no provee un almacenamiento real y depende de la abstracción materializada por las interfaces <em>org.springframework.cache.Cache</em> y <em>org.springframework.cache.CacheManager.</em></p>
<p>Si no has definido un bean del tipo <em>CacheManager</em> o un <em>CacheResolver</em> llamado <em>cacheResolver</em> (consulta <em>CachingConfigurer</em>), Spring Boot tratará de detectar los siguientes proveedores (en este orden):</p>
<ul class="simple">
<li>Generic</li>
<li>JCache (JSR-107) (EhCache 3, Hazelcast, Infinispan, etc)</li>
<li>EhCache 2.x</li>
<li>Hazelcast</li>
<li>Infinispan</li>
<li>Couchbase</li>
<li>Redis</li>
<li>Caffeine</li>
<li>Guava (obsoleto)</li>
<li>Simple</li>
</ul>
<blockquote>
<div><p>Tip</p>
<p>También es posible forzar el proveedor de caché a usar mediante la propiedad <em>spring.cache.type</em>. Usa esta propiedad si necesitas <strong>deshabilitar el caché en conjunto</strong> en ciertos ambientes (por ejemplo en pruebas).</p>
</div></blockquote>
<blockquote>
<div><p>Tip</p>
<p>Usa el 'Starter' <em>spring-boot-starter-cache</em> para añadir rápidamente dependencias de caché básico. El <em>starter</em> trae <em>spring-context-support</em>: si estás añadiendo dependencias manualmente, debes incluir <em>spring-context-support</em> a fin de utilizar el soporte para JCache, EhCache 2.x o Guava.</p>
</div></blockquote>
<p>Si el <em>CacheManager</em> es auto-configurado por Spring Boot, puedes ajustar más la configuración antes de que esté completamente inicializado al exponer un bean implementando la interfaz <em>CacheManagerCustomizer</em>. Lo siguiente establece una bandera para decir que los valores nulos deberían pasarse al mapa subyacente.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@Bean</span>
<span class="n">public</span> <span class="n">CacheManagerCustomizer</span><span class="o">&lt;</span><span class="n">ConcurrentMapCacheManager</span><span class="o">&gt;</span> <span class="n">cacheManagerCustomizer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">new</span> <span class="n">CacheManagerCustomizer</span><span class="o">&lt;</span><span class="n">ConcurrentMapCacheManager</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
        <span class="nd">@Override</span>
        <span class="n">public</span> <span class="n">void</span> <span class="n">customize</span><span class="p">(</span><span class="n">ConcurrentMapCacheManager</span> <span class="n">cacheManager</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cacheManager</span><span class="o">.</span><span class="n">setAllowNullValues</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote>
<div><p>Nota</p>
<p>En el ejemplo de arriba, se espera un <em>ConcurrentMapCacheManager</em> auto-configurado. Si ese no es el caso (ya sea que proporcionaste tu propia configuración o que se auto-configuró un proveedor de caché diferente), el <em>customizer</em> (personalizador) no se invocará en lo absoluto. Puedes tener tantos <em>customizers</em> como desees y puedes también ordenarlos como siempre usando <em>&#64;Order</em> o Ordered_._</p>
</div></blockquote>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../jhipster/index.html" class="btn btn-neutral float-right" title="JHipster" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spring-data-jpa-reference.html" class="btn btn-neutral" title="Spring Data JPA - Documentación de referencia" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, DADS Infotec.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>